# Local development environment variables
# All databases run inside Docker Compose — no external repos needed.
# Use `make start` to bring everything up.

LLM_PROVIDER=openai
EXTRACTION_MODEL_OPENAI=gpt-4o
EXTRACTION_MODEL_XAI=grok-4-fast-reasoning
OPENAI_API_KEY=sk-REPLACE_ME
XAI_API_KEY=xaikey-REPLACE_ME
XAI_BASE_URL=https://api.x.ai/v1

# Database connections (defaults match docker-compose.yml services)
CHROMA_HOST=chromadb
CHROMA_PORT=8000
REDIS_URL=redis://redis:6379/0
POSTGRES_PASSWORD=changeme
TIMESCALE_DSN=postgresql://postgres:changeme@timescaledb:5432/agentic_memories

# Cloudflare Access (optional, for production auth)
CF_ACCESS_AUD=REPLACE_WITH_CLOUDFLARE_ACCESS_AUDIENCE_UUID
CF_ACCESS_TEAM_DOMAIN=memoryforge
SCHEDULED_MAINTENANCE_ENABLED=false

# TimescaleDB tuning (optional — docker-compose defaults are tuned for production)
# Uncomment to override for local dev (smaller memory footprint)
# POSTGRES_SHARED_BUFFERS=512MB
# POSTGRES_SHM_SIZE=1gb
# POSTGRES_MAX_CONNECTIONS=100
# POSTGRES_WORK_MEM=16MB
# POSTGRES_EFFECTIVE_CACHE_SIZE=1GB
# POSTGRES_MAINTENANCE_WORK_MEM=128MB

# Langfuse tracing (optional)
LANGFUSE_PUBLIC_KEY=pk-lf-...
LANGFUSE_SECRET_KEY=sk-lf-...
LANGFUSE_HOST=https://us.cloud.langfuse.com

# ============================================================================
# Cloud Logging - Grafana Loki (Epic 11)
# ============================================================================

# Environment mode: dev or prod
# Set to "prod" to enable Loki cloud logging by default
# Can also be overridden via command line: ENV=prod make start
ENVIRONMENT=dev

# Loki Push URL (required for ENVIRONMENT=prod)
# Get from: Grafana Cloud -> Connections -> Hosted Logs -> Loki -> Details
# Format: https://<user-id>:<api-key>@<host>/loki/api/v1/push
# Example: https://123456:glc_abc123@logs-prod-us-central1.grafana.net/loki/api/v1/push
LOKI_URL=

# Note: The Loki Docker plugin must be installed for production logging:
#   docker plugin install grafana/loki-docker-driver:latest --alias loki --grant-all-permissions
#
# To verify installation:
#   docker plugin ls
#   # Should show: loki:latest  Loki Logging Driver  true
