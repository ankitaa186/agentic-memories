# ============================================================================
# Agentic Memories — Environment Configuration
# ============================================================================
# Copy this file:  cp env.example .env
# Then set your API key below and run:  make start
# ============================================================================

# ── Required ─────────────────────────────────────────────────────────────────
LLM_PROVIDER=openai                # "openai" or "xai" (for Grok extraction)
OPENAI_API_KEY=REPLACE_WITH_OPENAI_API_KEY       # Always required (used for embeddings + extraction)

# ── Optional: xAI/Grok for extraction ───────────────────────────────────────
# Set LLM_PROVIDER=xai above and uncomment below to use Grok for extraction.
# OpenAI is still used for embeddings either way.
# XAI_API_KEY=REPLACE_WITH_XAI_API_KEY

# ── Optional: Model overrides ────────────────────────────────────────────────
# EXTRACTION_MODEL_OPENAI=gpt-4o
# EXTRACTION_MODEL_XAI=grok-4-fast-reasoning
# XAI_BASE_URL=https://api.x.ai/v1

# ── Optional: Database password (default works with docker-compose) ──────────
# POSTGRES_PASSWORD=changeme

# ── Optional: Observability (Langfuse LLM tracing) ──────────────────────────
# LANGFUSE_PUBLIC_KEY=pk-lf-...
# LANGFUSE_SECRET_KEY=sk-lf-...
# LANGFUSE_HOST=https://us.cloud.langfuse.com

# ── Optional: Scheduled maintenance ─────────────────────────────────────────
# SCHEDULED_MAINTENANCE_ENABLED=false

# ── Optional: Cloudflare Access (production auth) ───────────────────────────
# CF_ACCESS_AUD=REPLACE_WITH_CLOUDFLARE_ACCESS_AUDIENCE_UUID
# CF_ACCESS_TEAM_DOMAIN=memoryforge

# ── Optional: TimescaleDB tuning (docker-compose defaults are tuned) ────────
# POSTGRES_SHARED_BUFFERS=512MB
# POSTGRES_SHM_SIZE=1gb
# POSTGRES_MAX_CONNECTIONS=100
# POSTGRES_WORK_MEM=16MB
# POSTGRES_EFFECTIVE_CACHE_SIZE=1GB
# POSTGRES_MAINTENANCE_WORK_MEM=128MB

# ── Optional: Cloud Logging — Grafana Loki ──────────────────────────────────
# ENVIRONMENT=dev                  # Set to "prod" to enable Loki logging
# LOKI_URL=                        # Required when ENVIRONMENT=prod
# Format: https://<user-id>:<api-key>@<host>/loki/api/v1/push
# Note: Loki Docker plugin must be installed for production logging:
#   docker plugin install grafana/loki-docker-driver:latest --alias loki --grant-all-permissions
